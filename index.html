<!DOCTYPE html>
<html lang="ja">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="zunda.css" type="text/css" media="all">
  <!--
    OpenPGP.js 6.3.0 is downloaded following links from https://openpgpjs.org/.
    Refer to openpgp.min.js-LICENSE.txt for its license.
  -->
  <script src="openpgp.min.js"></script>
  <script>
    const url="https://zunda.ninja";
    const signature="https://zunda.ninja/index.sig.txt";
    const pubkey="https://keys.openpgp.org/vks/v1/by-fingerprint/F60960D80B224382CA8D831CB56C20316D6E8279";

    const fetchTextOrThrow = (url) => new Promise((resolve, reject) => {
      fetch(url)
      .then(r => {
        if(r.status == 200) {
          resolve(r.text());
        } else {
          reject(new Error(`${url} responded with ${r.status}`));
        }
      })
      .catch(e => {e.message += ` ${url}`; reject(e)})
    });

    Promise.all([
      fetchTextOrThrow(url).then(d => openpgp.createMessage({text:d})),
      fetchTextOrThrow(signature).then(a => openpgp.readSignature({armoredSignature:a})),
      fetchTextOrThrow(pubkey).then(a => openpgp.readKey({armoredKey:a}))
    ]).then(([m,s,k]) => openpgp.verify({message:m,signature:s,verificationKeys:k}))
    .then(r => r.signatures[0].verified)
    .then(x => {if(x) {
      window.location.assign(url);
    } else {
      throw new Error(x);};
    })
    .catch(e => console.log(e));
  </script>
  <title>zundaのお墓</title>
</head>
<body>
  <h1>zundaのお墓</h1>
  <p>🪦 このページがあなたの手に落ちる頃には、私はもうこの世にはいないでしょう。とくに死んでいるでしょう</p>
  <p class="sub">夏目漱石『<a href="https://www.aozora.gr.jp/cards/000148/files/773_14560.html">こころ</a>』より</p>
  <h2>本当に?</h2>
  <p>このページはお手元のブラウザのJavaScriptで <a href="https://zunda.ninja/">https://zunda.ninja/</a> を閲覧できるかを確認してzundaの生死を推定しています。このURLを閲覧できない場合にはDNS業者への支払いが停止したことが原因かもしれません。閲覧できる場合は推定が間違いかもしれません。</p>
  <p>zunda.ninjaドメインが既に失なわれている場合にはWayback Machineから<a href="https://web.archive.org/web/*/https://zunda.ninja">検索</a>することで過去の様子を知ることができるかもしれません。</p>
  <p>これまでいろいろありがとう。</p>
<hr>
  <p>このページのソースファイルの<a href="index.sig.txt">デジタル署名</p>
</body>
</html>
